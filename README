AI generated ~1h

Вот пример README для твоей программы, описывающий все возможности, флаги и пример использования:

---

# Directory JSON Scanner

Программа на Go для сканирования директории и создания JSON-файла с полной структурой файлов и папок.

Поддерживает:

* Вложенную и плоскую (stream) структуры JSON.
* Пропуск файлов/папок по маске (`--exclude`).
* Потоковую запись с возможностью возобновления (`--stream --resume`).
* Объединение нескольких JSON-файлов (`--merge`).
* Красивый вывод JSON (`--pretty`).
* Прогресс с количеством обработанных файлов, скоростью и потребляемой памятью.

---

## Флаги

| Флаг        | Описание                                                                       |
| ----------- | ------------------------------------------------------------------------------ |
| `--dir`     | Директория для сканирования (по умолчанию `.`)                                 |
| `--exclude` | Список исключений через запятую (имена, части пути, расширения, типы файлов)   |
| `--output`  | Имя выходного JSON-файла (по умолчанию `structure.json`)                       |
| `--pretty`  | Красивый формат JSON с отступами                                               |
| `--stream`  | Потоковая запись плоской структуры в `*_temp.json` (экономия памяти)           |
| `--resume`  | Продолжить сканирование из существующего `*_temp.json` (только с `--stream`)   |
| `--merge`   | Объединение нескольких JSON-файлов через запятую (сканирование не выполняется) |
| `--log`     | Имя лог-файла (по умолчанию `<output>.log`)                                    |

---

## Поля каждого объекта JSON

* `IsDir` — папка или файл (`true/false`)
* `FullName` — полное имя файла/папки
* `Ext` — расширение файла
* `NameOnly` — имя без расширения
* `SizeBytes` — размер в байтах (для папок суммарный размер)
* `SizeHuman` — человекочитаемый размер (KB, MB, GB…)
* `FullPath` — полный путь от корня
* `FullPathOrig` — оригинальный полный путь
* `Created` — дата создания
* `Updated` — дата последнего изменения
* `Perm` — права доступа
* `Md5` — MD5-сумма файла или папки (для папки — MD5 имени)
* `FileType` — тип файла (`image`, `video`, `audio`, `text`, `code`, `archive`, `other`)
* `Children` — дочерние элементы (только для вложенной структуры)

---

## Примеры использования

### 1. Обычное сканирование с вложенной структурой

```bash
go run main.go --dir=/data --output=structure.json --pretty
```

### 2. Потоковое сканирование (экономия памяти)

```bash
go run main.go --dir=/data --stream --output=structure.json
```

Результат:

* `structure_temp.json` — плоский список файлов
* `structure.json` — собранное дерево

### 3. Продолжение потокового сканирования (`--resume`)

```bash
go run main.go --dir=/data --stream --resume --output=structure.json
```

### 4. Исключение определённых файлов и папок

```bash
go run main.go --dir=/data --stream --exclude=.git,.tmp,image
```

### 5. Объединение нескольких JSON-файлов

```bash
go run main.go --merge=part1.json,part2.json,part3.json --output=merged.json --pretty
```

---

## Логирование

Программа ведёт лог в файл `<output>.log` (можно задать через `--log`).
В лог записываются:

* Прогресс сканирования
* Ошибки чтения файлов
* Информация о сборке JSON

---

## Примечания

* Потоковая запись (`--stream`) позволяет сканировать очень большие директории без большого потребления оперативной памяти.
* При использовании `--resume` можно безопасно прерывать и продолжать сканирование.
* При объединении JSON (`--merge`) программа корректно собирает вложенную структуру из плоских или уже вложенных файлов.

---

Если хочешь, я могу сразу добавить **раздел «Установка и сборка»** с командами для компиляции в исполняемый файл для Linux, Windows и Mac.

Хочешь, чтобы я это сделал?
